"use strict";(self.webpackChunkkrozac_github_io=self.webpackChunkkrozac_github_io||[]).push([[712,725],{725:(t,i,o)=>{o.r(i),o.d(i,{Boid:()=>e,boidParams:()=>s});const s={separationFactor:.05,alignmentFactor:.05,centeringFactor:5e-4};class e{constructor(t,i){this.position={x:t,y:i},this.velocity={x:2*Math.random()-1,y:2*Math.random()-1},this.acceleration={x:0,y:0},this.trail=[],this.maxTrailLength=50,this.turnfactor=.2,this.visualRange=40,this.protectedRange=8,this.maxspeed=6,this.minspeed=3}update(t,i){this.velocity.x+=this.acceleration.x,this.velocity.y+=this.acceleration.y;const o=Math.sqrt(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2));o>this.maxspeed&&(this.velocity.x=this.velocity.x/o*this.maxspeed,this.velocity.y=this.velocity.y/o*this.maxspeed),o<this.minspeed&&(this.velocity.x=this.velocity.x/o*this.minspeed,this.velocity.y=this.velocity.y/o*this.minspeed),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.x<50&&(this.velocity.x+=this.turnfactor),this.position.x>t-50&&(this.velocity.x-=this.turnfactor),this.position.y<50&&(this.velocity.y+=this.turnfactor),this.position.y>i-50&&(this.velocity.y-=this.turnfactor),this.acceleration.x=0,this.acceleration.y=0,this.trail.push({x:this.position.x,y:this.position.y}),this.trail.length>this.maxTrailLength&&this.trail.shift()}applyForce(t){this.acceleration.x+=t.x,this.acceleration.y+=t.y}draw(t){t.beginPath(),t.arc(this.position.x,this.position.y,5,0,2*Math.PI),t.fill()}flock(t){this.alignment(t),this.cohesion(t),this.separation(t)}separation(t){let i={dx:0,dy:0};for(const o of t){const t=Math.sqrt(Math.pow(this.position.x-o.position.x,2)+Math.pow(this.position.y-o.position.y,2));t<this.protectedRange&&t>0&&(i.dx+=this.position.x-o.position.x,i.dy+=this.position.y-o.position.y)}this.velocity.x+=i.dx*s.separationFactor,this.velocity.y+=i.dy*s.separationFactor}alignment(t){let i=0,o=0,e=0;for(const s of t){const t=Math.sqrt(Math.pow(this.position.x-s.position.x,2)+Math.pow(this.position.y-s.position.y,2));t<this.visualRange&&t>0&&(i+=s.velocity.x,o+=s.velocity.y,e++)}e>0&&(i/=e,o/=e),this.velocity.x+=(i-this.velocity.x)*s.alignmentFactor,this.velocity.y+=(o-this.velocity.y)*s.alignmentFactor}cohesion(t){let i=0,o=0,e=0;for(const s of t){const t=Math.sqrt(Math.pow(this.position.x-s.position.x,2)+Math.pow(this.position.y-s.position.y,2));t<this.visualRange&&t>0&&(i+=s.position.x,o+=s.position.y,e++)}e>0&&(i/=e,o/=e),this.velocity.x+=(i-this.position.x)*s.centeringFactor,this.velocity.y+=(o-this.position.y)*s.centeringFactor}}},712:(t,i,o)=>{o.r(i),o.d(i,{addTracingToggle:()=>h,startSimulation:()=>n});var s=o(725);let e=!1;function n(t){const i=t.canvas,o=[];for(let e=0;e<500;e++)o.push(new s.Boid(Math.random()*i.width,Math.random()*i.height));function n(i){if(e){t.beginPath();for(let o=0;o<i.trail.length-1;o++){const s=i.trail[o],e=i.trail[o+1];t.moveTo(s.x,s.y),t.lineTo(e.x,e.y)}t.strokeStyle="rgba(255, 255, 255, 0.2)",t.lineWidth=1,t.stroke()}}function h(i){const o=Math.atan2(i.velocity.y,i.velocity.x);t.save(),t.translate(i.position.x,i.position.y),t.rotate(o),t.beginPath(),t.moveTo(0,-5),t.lineTo(-5,5),t.lineTo(10,5),t.closePath(),t.fillStyle="rgba(255,255,255, 0.5)",t.fill(),t.restore()}!function s(){t.clearRect(0,0,i.width,i.height);for(const t of o)t.flock(o),t.update(i.width,i.height),n(t),h(t);requestAnimationFrame(s)}()}function h(){const t=document.createElement("button");t.textContent="Toggle Tracing",t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.zIndex="10",t.addEventListener("click",(()=>{e=!e})),document.body.appendChild(t)}}}]);
//# sourceMappingURL=712.86aa5469.chunk.js.map
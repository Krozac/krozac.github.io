"use strict";(self.webpackChunkkrozac_github_io=self.webpackChunkkrozac_github_io||[]).push([[712,725,879],{725:(t,i,o)=>{o.r(i),o.d(i,{Boid:()=>n,boidParams:()=>e});const e={separationFactor:.05,alignmentFactor:.05,centeringFactor:5e-4};class n{constructor(t,i){this.position={x:t,y:i},this.velocity={x:2*Math.random()-1,y:2*Math.random()-1},this.acceleration={x:0,y:0},this.trail=[],this.maxTrailLength=50,this.turnfactor=.2,this.visualRange=40,this.protectedRange=8,this.maxspeed=6,this.minspeed=3}update(t,i){this.velocity.x+=this.acceleration.x,this.velocity.y+=this.acceleration.y;const o=Math.sqrt(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2));o>this.maxspeed&&(this.velocity.x=this.velocity.x/o*this.maxspeed,this.velocity.y=this.velocity.y/o*this.maxspeed),o<this.minspeed&&(this.velocity.x=this.velocity.x/o*this.minspeed,this.velocity.y=this.velocity.y/o*this.minspeed),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.x<50&&(this.velocity.x+=this.turnfactor),this.position.x>t-50&&(this.velocity.x-=this.turnfactor),this.position.y<50&&(this.velocity.y+=this.turnfactor),this.position.y>i-50&&(this.velocity.y-=this.turnfactor),this.acceleration.x=0,this.acceleration.y=0,this.trail.push({x:this.position.x,y:this.position.y}),this.trail.length>this.maxTrailLength&&this.trail.shift()}applyForce(t){this.acceleration.x+=t.x,this.acceleration.y+=t.y}draw(t){t.beginPath(),t.arc(this.position.x,this.position.y,5,0,2*Math.PI),t.fill()}flock(t){this.alignment(t),this.cohesion(t),this.separation(t)}separation(t){let i={dx:0,dy:0};for(const o of t){const t=Math.sqrt(Math.pow(this.position.x-o.position.x,2)+Math.pow(this.position.y-o.position.y,2));t<this.protectedRange&&t>0&&(i.dx+=this.position.x-o.position.x,i.dy+=this.position.y-o.position.y)}this.velocity.x+=i.dx*e.separationFactor,this.velocity.y+=i.dy*e.separationFactor}alignment(t){let i=0,o=0,n=0;for(const e of t){const t=Math.sqrt(Math.pow(this.position.x-e.position.x,2)+Math.pow(this.position.y-e.position.y,2));t<this.visualRange&&t>0&&(i+=e.velocity.x,o+=e.velocity.y,n++)}n>0&&(i/=n,o/=n),this.velocity.x+=(i-this.velocity.x)*e.alignmentFactor,this.velocity.y+=(o-this.velocity.y)*e.alignmentFactor}cohesion(t){let i=0,o=0,n=0;for(const e of t){const t=Math.sqrt(Math.pow(this.position.x-e.position.x,2)+Math.pow(this.position.y-e.position.y,2));t<this.visualRange&&t>0&&(i+=e.position.x,o+=e.position.y,n++)}n>0&&(i/=n,o/=n),this.velocity.x+=(i-this.position.x)*e.centeringFactor,this.velocity.y+=(o-this.position.y)*e.centeringFactor}}},879:(t,i,o)=>{o.r(i);var e=o(712),n=o(725);const s=document.createElement("canvas");s.width=window.innerWidth,s.height=window.innerHeight,document.body.appendChild(s);const a=s.getContext("2d");a?((0,e.startSimulation)(a),(0,e.addTracingToggle)()):console.error("Failed to get canvas context.");const c=document.createElement("div");function h(t,i,o,e,n,s){const a=document.createElement("div"),c=document.createElement("label"),h=document.createElement("input"),r=document.createElement("span");return c.textContent=t,h.type="range",h.min=String(i),h.max=String(o),h.step=String(e),h.value=String(n),r.textContent=": ".concat(n),h.addEventListener("input",(()=>{r.textContent=": ".concat(h.value),s(Number(h.value))})),a.appendChild(c),a.appendChild(h),a.appendChild(r),a}c.style.position="absolute",c.style.top="10px",c.style.left="10px",c.style.backgroundColor="white",c.style.padding="10px",c.style.border="1px solid black",c.style.zIndex="10",c.appendChild(h("Separation",0,.1,.001,n.boidParams.separationFactor,(t=>n.boidParams.separationFactor=t))),c.appendChild(h("Alignment",0,.1,.001,n.boidParams.alignmentFactor,(t=>n.boidParams.alignmentFactor=t))),c.appendChild(h("Centering",0,.001,1e-5,n.boidParams.centeringFactor,(t=>n.boidParams.centeringFactor=t))),document.body.appendChild(c)},712:(t,i,o)=>{o.r(i),o.d(i,{addTracingToggle:()=>a,startSimulation:()=>s});var e=o(725);let n=!1;function s(t){const i=t.canvas,o=[];for(let n=0;n<500;n++)o.push(new e.Boid(Math.random()*i.width,Math.random()*i.height));function s(i){if(n){t.beginPath();for(let o=0;o<i.trail.length-1;o++){const e=i.trail[o],n=i.trail[o+1];t.moveTo(e.x,e.y),t.lineTo(n.x,n.y)}t.strokeStyle="rgba(255, 255, 255, 0.2)",t.lineWidth=1,t.stroke()}}function a(i){const o=Math.atan2(i.velocity.y,i.velocity.x);t.save(),t.translate(i.position.x,i.position.y),t.rotate(o),t.beginPath(),t.moveTo(0,-5),t.lineTo(-5,5),t.lineTo(10,5),t.closePath(),t.fillStyle="rgba(255,255,255, 0.5)",t.fill(),t.restore()}!function e(){t.clearRect(0,0,i.width,i.height);for(const t of o)t.flock(o),t.update(i.width,i.height),s(t),a(t);requestAnimationFrame(e)}()}function a(){const t=document.createElement("button");t.textContent="Toggle Tracing",t.style.position="absolute",t.style.top="10px",t.style.right="10px",t.style.zIndex="10",t.addEventListener("click",(()=>{n=!n})),document.body.appendChild(t)}}}]);
//# sourceMappingURL=879.3ee9858c.chunk.js.map